var Circle=function(t,e,i,a){this.x=t,this.y=e,this.radius=i,this.color=a};Circle.prototype.update=function(t){},Circle.prototype.draw=function(t){t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this.color,t.fill(),t.restore()},Circle.prototype.collidesWith=function(t){var e=t.radius+this.radius,i=Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2));return e>=i};var draw=function(){ctx.clearRect(0,0,canvasWidth,canvasHeight);for(var t=0;t<entities.length;t++)entities[t].draw(ctx)},Enemy=function(t,e,i,a){this.x=t,this.y=e,this.centerX=t,this.centerY=e,this.radius=i,this.color=a};Enemy.prototype=new Circle,Enemy.prototype.update=function(t){this.x=100*Math.sin(t/1e3)+this.centerX,this.y=100*Math.cos(t/1e3)+this.centerY};var player=new Circle(50,40,40,"red"),entities=[];entities.push(new Enemy(300,300,20,"green")),entities.push(new Enemy(150,150,20,"blue")),entities.push(player);var gpActive=function(){var t=navigator.getGamepads()[0];t&&(joystickX=Math.abs(t.axes[0])>.1?t.axes[0]:0,joystickY=Math.abs(t.axes[1])>.1?-1*t.axes[1]:0)},handleInput=function(){gpActive(),player.x+=2*joystickX,player.y-=2*joystickY},canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),canvasWidth=canvas.clientWidth,canvasHeight=canvas.clientHeight,joystickX=0,joystickY=0,doFrame=function(t){handleInput(),simulation(t),draw(),window.requestAnimationFrame(doFrame)};window.requestAnimationFrame(doFrame),document.onkeydown=function(t){switch(t.keyCode){case 37:joystickX=-1;break;case 38:joystickY=1;break;case 39:joystickX=1;break;case 40:joystickY=-1}},document.onkeyup=function(t){switch(t.keyCode){case 37:joystickX=0;break;case 38:joystickY=0;break;case 39:joystickX=0;break;case 40:joystickY=0}};var simulation=function(t){player.color="red";for(var e=0;e<entities.length;e++)entities[e].update(t);for(var e=0;e<entities.length;e++){var i=entities[e];i instanceof Enemy&&player.collidesWith(i)&&(player.color="orange")}};