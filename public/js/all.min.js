var Circle=function(t,e,i,a){this.x=t,this.y=e,this.radius=i,this.color=a};Circle.prototype.update=function(t){},Circle.prototype.draw=function(t){t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this.color,t.fill(),t.restore()},Circle.prototype.collidesWith=function(t){var e=t.radius+this.radius,i=Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2));return e>=i};var draw=function(){ctx.clearRect(0,0,canvasWidth,canvasHeight);for(var t=0;t<entities.length;t++)entities[t].draw(ctx)},Enemy=function(t,e,i,a){this.x=t,this.y=e,this.centerX=t,this.centerY=e,this.radius=i,this.color=a};Enemy.prototype=new Circle,Enemy.prototype.update=function(t){this.x=100*Math.sin(t/1e3)+this.centerX,this.y=100*Math.cos(t/1e3)+this.centerY};var gpActive=function(){var t=navigator.getGamepads()[0];t&&(joystickX=Math.abs(t.axes[0])>.1?t.axes[0]:0,joystickY=Math.abs(t.axes[1])>.1?-1*t.axes[1]:0)},handleInput=function(){gpActive(),player.x+=2*joystickX,player.y-=2*joystickY};!function(){"use strict";var t=document.getElementById("canvas"),e=t.getContext("2d"),i=t.clientWidth,a=t.clientHeight,s=0,n=0,o=function(t,e,i,a){this.x=t,this.y=e,this.radius=i,this.color=a};o.prototype.update=function(t){},o.prototype.draw=function(t){t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this.color,t.fill(),t.restore()},o.prototype.collidesWith=function(t){var e=t.radius+this.radius,i=Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2));return e>=i};var r=function(t,e,i,a){this.x=t,this.y=e,this.centerX=t,this.centerY=e,this.radius=i,this.color=a};r.prototype=new o,r.prototype.update=function(t){this.x=100*Math.sin(t/1e3)+this.centerX,this.y=100*Math.cos(t/1e3)+this.centerY};var c=new o(50,40,40,"red"),h=[];h.push(new r(300,300,20,"green")),h.push(new r(150,150,20,"blue")),h.push(c);var u=function(){var t=navigator.getGamepads()[0];t&&(s=Math.abs(t.axes[0])>.1?t.axes[0]:0,n=Math.abs(t.axes[1])>.1?-1*t.axes[1]:0)};document.onkeydown=function(t){switch(t.keyCode){case 37:s=-1;break;case 38:n=1;break;case 39:s=1;break;case 40:n=-1}},document.onkeyup=function(t){switch(t.keyCode){case 37:s=0;break;case 38:n=0;break;case 39:s=0;break;case 40:n=0}};var l=function(){u(),c.x+=2*s,c.y-=2*n},y=function(t){c.color="red";for(var e=0;e<h.length;e++)h[e].update(t);for(var e=0;e<h.length;e++){var i=h[e];i instanceof r&&c.collidesWith(i)&&(c.color="orange")}},d=function(){e.clearRect(0,0,i,a);for(var t=0;t<h.length;t++)h[t].draw(e)},p=function(t){l(),y(t),d(),window.requestAnimationFrame(p)};window.requestAnimationFrame(p)}();var doFrame=function(t){handleInput(),simulation(t),draw(),window.requestAnimationFrame(doFrame)};window.requestAnimationFrame(doFrame),document.onkeydown=function(t){switch(t.keyCode){case 37:joystickX=-1;break;case 38:joystickY=1;break;case 39:joystickX=1;break;case 40:joystickY=-1}},document.onkeyup=function(t){switch(t.keyCode){case 37:joystickX=0;break;case 38:joystickY=0;break;case 39:joystickX=0;break;case 40:joystickY=0}};var simulation=function(t){player.color="red";for(var e=0;e<entities.length;e++)entities[e].update(t);for(var e=0;e<entities.length;e++){var i=entities[e];i instanceof Enemy&&player.collidesWith(i)&&(player.color="orange")}};